<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<title>HAF Übersichtskarte</title>

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
  }
  #map {
    width: 100%;
    height: 100%;
  }
  .clickable-region {
    cursor: pointer;
  }
</style>

</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// ------- Lade GeoJSON Dateien aus dem gleichen Repo -------
Promise.all([
  fetch("regionen.geojson").then(r => r.json()),
  fetch("bundeslaender.geojson").then(r => r.json())
]).then(([REGIONS, AUSTRIA]) => {

  const COLOR_FORERUNNER = "#d9534f";
  const COLOR_FOLLOWER = "#0275d8";
  const COLOR_DEFAULT = "#6c757d";

  const map = L.map("map").setView([47.5, 13.3], 7);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    attribution: "© OpenStreetMap"
  }).addTo(map);

  function regionStyle(feature) {
    const t = feature.properties.type;
    return {
      color: "#ffffff",
      weight: 1,
      fillColor:
        t === "forerunner" ? COLOR_FORERUNNER :
        t === "follower" ? COLOR_FOLLOWER :
        COLOR_DEFAULT,
      fillOpacity: 0.6,
      className: "clickable-region"
    };
  }

  let regionsLayer = L.geoJSON(REGIONS, {
    style: regionStyle,
    onEachFeature: (feature, layer) => {
      layer.bindTooltip(feature.properties.name);
      layer.on("click", () => {
        window.location.href = feature.properties.url;
      });
    }
  }).addTo(map);

  map.fitBounds(regionsLayer.getBounds());

  L.geoJSON(AUSTRIA, {
    style: { color: "#333", weight: 1, fillOpacity: 0 }
  }).addTo(map);

});
</script>

</body>
</html>

